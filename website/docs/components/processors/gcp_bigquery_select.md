---
title: gcp_bigquery_select
slug: gcp_bigquery_select
type: processor
status: experimental
categories: ["Integration"]
---

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the corresponding source file under internal/impl/<provider>.
-->

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

:::caution EXPERIMENTAL
This component is experimental and therefore subject to change or removal outside of major version releases.
:::
Executes a `SELECT` query against BigQuery and replaces messages with the rows returned.

Introduced in version 3.64.0.


<Tabs defaultValue="common" values={[
  { label: 'Common', value: 'common', },
  { label: 'Advanced', value: 'advanced', },
]}>

<TabItem value="common">

```yml
# Common config fields, showing default values
label: ""
gcp_bigquery_select:
  project: "" # No default (required)
  table: bigquery-public-data.samples.shakespeare # No default (required)
  columns: [] # No default (required)
  where: type = ? and created_at > ? # No default (optional)
  job_labels: {}
  args_mapping: root = [ "article", now().ts_format("2006-01-02") ] # No default (optional)
  prefix: "" # No default (optional)
  suffix: "" # No default (optional)
```

</TabItem>
<TabItem value="advanced">

```yml
# All config fields, showing default values
label: ""
gcp_bigquery_select:
  project: "" # No default (required)
  table: bigquery-public-data.samples.shakespeare # No default (required)
  columns: [] # No default (required)
  where: type = ? and created_at > ? # No default (optional)
  job_labels: {}
  args_mapping: root = [ "article", now().ts_format("2006-01-02") ] # No default (optional)
  prefix: "" # No default (optional)
  suffix: "" # No default (optional)
  credentials_path: "" # No default (optional)
  credentials:
    type: service_account
    project_id: "" # No default (required)
    private_key_id: "" # No default (required)
    private_key: "" # No default (required)
    client_email: "" # No default (required)
    client_id: "" # No default (required)
    auth_uri: https://accounts.google.com/o/oauth2/auth
    token_uri: https://oauth2.googleapis.com/token
    auth_provider_x509_cert_url: https://www.googleapis.com/oauth2/v1/certs
    client_x509_cert_url: "" # No default (required)
```

</TabItem>
</Tabs>

## Examples

<Tabs defaultValue="Word count" values={[
{ label: 'Word count', value: 'Word count', },
]}>

<TabItem value="Word count">


Given a stream of English terms, enrich the messages with the word count from Shakespeare's public works:

```yaml
pipeline:
  processors:
    - branch:
        processors:
          - gcp_bigquery_select:
              project: test-project
              table: bigquery-public-data.samples.shakespeare
              columns:
                - word
                - sum(word_count) as total_count
              where: word = ?
              suffix: |
                GROUP BY word
                ORDER BY total_count DESC
                LIMIT 10
              args_mapping: root = [ this.term ]
        result_map: |
          root.count = this.get("0.total_count")
```

</TabItem>
</Tabs>

## Fields

### `project`

GCP project where the query job will execute.


Type: `string`  

### `table`

Fully-qualified BigQuery table name to query.


Type: `string`  

```yml
# Examples

table: bigquery-public-data.samples.shakespeare
```

### `columns`

A list of columns to query.


Type: `array`  

### `where`

An optional where clause to add. Placeholder arguments are populated with the `args_mapping` field. Placeholders should always be question marks (`?`).


Type: `string`  

```yml
# Examples

where: type = ? and created_at > ?

where: user_id = ?
```

### `job_labels`

A list of labels to add to the query job.


Type: `object`  
Default: `{}`  

### `args_mapping`

An optional [Bloblang mapping](/docs/guides/bloblang/about) which should evaluate to an array of values matching in size to the number of placeholder arguments in the field `where`.


Type: `string`  

```yml
# Examples

args_mapping: root = [ "article", now().ts_format("2006-01-02") ]
```

### `prefix`

An optional prefix to prepend to the select query (before SELECT).


Type: `string`  

### `suffix`

An optional suffix to append to the select query.


Type: `string`  

### `credentials_path`

The path for custom credentials of Google Cloud.
:::warning Secret
This field contains sensitive information that usually shouldn't be added to a config directly, read our [secrets page for more info](/docs/configuration/secrets).
:::


Type: `string`  

### `credentials`

Optional manual configuration of Google Cloud credentials to use. More information can be found [in this document](/docs/guides/cloud/gcp).
:::warning Secret
This field contains sensitive information that usually shouldn't be added to a config directly, read our [secrets page for more info](/docs/configuration/secrets).
:::


Type: `object`  

### `credentials.type`

The type of the account (always "service_account" for a service account).


Type: `string`  
Default: `"service_account"`  

### `credentials.project_id`

The ID of your Google Cloud project.


Type: `string`  

### `credentials.private_key_id`

The ID of your private key.
:::warning Secret
This field contains sensitive information that usually shouldn't be added to a config directly, read our [secrets page for more info](/docs/configuration/secrets).
:::


Type: `string`  

### `credentials.private_key`

Your private key.
:::warning Secret
This field contains sensitive information that usually shouldn't be added to a config directly, read our [secrets page for more info](/docs/configuration/secrets).
:::


Type: `string`  

### `credentials.client_email`

The email address of your service account.
:::warning Secret
This field contains sensitive information that usually shouldn't be added to a config directly, read our [secrets page for more info](/docs/configuration/secrets).
:::


Type: `string`  

### `credentials.client_id`

The ID of your service account.
:::warning Secret
This field contains sensitive information that usually shouldn't be added to a config directly, read our [secrets page for more info](/docs/configuration/secrets).
:::


Type: `string`  

### `credentials.auth_uri`

The URI for OAuth2 authorization.


Type: `string`  
Default: `"https://accounts.google.com/o/oauth2/auth"`  

### `credentials.token_uri`

The URI that provides the OAuth2 tokens.


Type: `string`  
Default: `"https://oauth2.googleapis.com/token"`  

### `credentials.auth_provider_x509_cert_url`

The URL of the authentication provider's X.509 public key certificate.


Type: `string`  
Default: `"https://www.googleapis.com/oauth2/v1/certs"`  

### `credentials.client_x509_cert_url`

The URL of the service account's X.509 public key certificate. Typically: https://www.googleapis.com/robot/v1/metadata/x509/your-service-account-email%40your-project-id.iam.gserviceaccount.com
:::warning Secret
This field contains sensitive information that usually shouldn't be added to a config directly, read our [secrets page for more info](/docs/configuration/secrets).
:::


Type: `string`  


